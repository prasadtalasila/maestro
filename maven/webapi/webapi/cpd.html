<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.8.1 from org.apache.maven.plugins:maven-pmd-plugin:3.13.0:cpd at 2020-06-25 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>webapi &#x2013; CPD Results</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta http-equiv="Content-Language" content="en" />
    
  </head>
  <body class="composite">
    <div id="banner">
<div id="bannerLeft">
webapi
</div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
      <div class="xleft">
        <span id="publishDate">Last Published: 2020-06-25</span>
          &nbsp;| <span id="projectVersion">Version: 1.0.0-SNAPSHOT</span>
      </div>
      <div class="xright"><a href="${project.url}" title="webapi">webapi</a>      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
       <h5>Parent Project</h5>
    <ul>
     <li class="none"><a href="../../index.html" title="root">root</a></li>
    </ul>
       <h5>Project Documentation</h5>
    <ul>
     <li class="collapsed"><a href="project-info.html" title="Project Information">Project Information</a></li>
     <li class="expanded"><a href="project-reports.html" title="Project Reports">Project Reports</a>
      <ul>
       <li class="none"><strong>CPD</strong></li>
       <li class="none"><a href="pmd.html" title="PMD">PMD</a></li>
       <li class="none"><a href="checkstyle.html" title="Checkstyle">Checkstyle</a></li>
       <li class="none"><a href="surefire-report.html" title="Surefire Report">Surefire Report</a></li>
       <li class="none"><a href="apidocs/index.html" title="Javadoc">Javadoc</a></li>
       <li class="none"><a href="testapidocs/index.html" title="Test Javadoc">Test Javadoc</a></li>
      </ul></li>
    </ul>
      <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
      </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
<div class="section">
<h2><a name="CPD_Results"></a>CPD Results</h2>
<p>The following document contains the results of PMD's  <a class="externalLink" href="https://pmd.github.io/latest/pmd_userdocs_cpd.html">CPD</a> 6.21.0.</p></div>
<div class="section">
<h2><a name="Duplications"></a>Duplications</h2>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>org/intocps/maestro/webapi/maestro1/Maestro1SimulationController.java</td>
<td>532</td></tr>
<tr class="a">
<td>org/intocps/maestro/webapi/maestro2/Maestro2SimulationController.java</td>
<td>484</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>        public IninializationData(@JsonProperty(&quot;fmus&quot;) Map&lt;String, String&gt; fmus, @JsonProperty(&quot;connections&quot;) Map&lt;String, List&lt;String&gt;&gt; connections,
                @JsonProperty(&quot;parameters&quot;) Map&lt;String, Object&gt; parameters, @JsonProperty(&quot;livestream&quot;) Map&lt;String, List&lt;String&gt;&gt; livestream,
                @JsonProperty(&quot;logvariables&quot;) Map&lt;String, List&lt;String&gt;&gt; logVariables, @JsonProperty(&quot;parallelSimulation&quot;) boolean parallelSimulation,
                @JsonProperty(&quot;stabalizationEnabled&quot;) boolean stabalizationEnabled,
                @JsonProperty(&quot;global_absolute_tolerance&quot;) double global_absolute_tolerance,
                @JsonProperty(&quot;global_relative_tolerance&quot;) double global_relative_tolerance, @JsonProperty(&quot;loggingOn&quot;) boolean loggingOn,
                @JsonProperty(&quot;visible&quot;) boolean visible, @JsonProperty(&quot;simulationProgramDelay&quot;) boolean simulationProgramDelay,
                @JsonProperty(&quot;hasExternalSignals&quot;) boolean hasExternalSignals, @JsonProperty(&quot;algorithm&quot;) IAlgorithmConfig algorithm,
                @JsonProperty(&quot;overrideLogLevel&quot;) final InitializeLogLevel overrideLogLevel) {
            this.fmus = fmus;
            this.connections = connections;
            this.parameters = parameters;
            this.livestream = livestream;
            this.logVariables = logVariables;
            this.loggingOn = loggingOn;
            this.visible = visible;
            this.simulationProgramDelay = simulationProgramDelay;
            this.hasExternalSignals = hasExternalSignals;
            this.parallelSimulation = parallelSimulation;
            this.stabalizationEnabled = stabalizationEnabled;
            this.global_absolute_tolerance = global_absolute_tolerance;
            this.global_relative_tolerance = global_relative_tolerance;
            this.algorithm = algorithm;
            this.overrideLogLevel = overrideLogLevel;
        }

        public InitializeLogLevel getOverrideLogLevel() {
            return overrideLogLevel;
        }

        public Map&lt;String, String&gt; getFmus() {
            return fmus;
        }

        public Map&lt;String, List&lt;String&gt;&gt; getConnections() {
            return connections;
        }

        public Map&lt;String, Object&gt; getParameters() {
            return parameters;
        }

        public Map&lt;String, List&lt;String&gt;&gt; getLivestream() {
            return livestream;
        }

        public Map&lt;String, List&lt;String&gt;&gt; getLogVariables() {
            return logVariables;
        }

        public boolean isParallelSimulation() {
            return parallelSimulation;
        }

        public boolean isStabalizationEnabled() {
            return stabalizationEnabled;
        }

        public double getGlobal_absolute_tolerance() {
            return global_absolute_tolerance;
        }

        public double getGlobal_relative_tolerance() {
            return global_relative_tolerance;
        }

        public boolean isLoggingOn() {
            return loggingOn;
        }

        public boolean isVisible() {
            return visible;
        }

        public boolean isSimulationProgramDelay() {
            return simulationProgramDelay;
        }

        public boolean isHasExternalSignals() {
            return hasExternalSignals;
        }

        public IAlgorithmConfig getAlgorithm() {
            return algorithm;
        }

        @JsonIgnore
        public Map&lt;String, URI&gt; getFmuFiles() throws Exception {
            Map&lt;String, URI&gt; files = new HashMap&lt;&gt;();

            if (fmus != null) {
                for (Map.Entry&lt;String, String&gt; entry : fmus.entrySet()) {
                    try {
                        files.put(entry.getKey(), new URI(entry.getValue()));
                    } catch (Exception e) {
                        throw new Exception(entry.getKey() + &quot;-&quot; + entry.getValue() + &quot;: &quot; + e.getMessage(), e);
                    }
                }
            }

            return files;
        }

        enum InitializeLogLevel {
            OFF,
            FATAL,
            ERROR,
            WARN,
            INFO,
            DEBUG,
            TRACE,
            ALL
        }

        @ApiModel(parent = IVarStepConstraint.class)
        public static class SamplingConstraint implements IVarStepConstraint {
            final Integer base;
            final Integer rate;
            final Integer startTime;

            public SamplingConstraint(Integer base, Integer rate, Integer startTime) {
                this.base = base;
                this.rate = rate;
                this.startTime = startTime;
            }

            public Integer getBase() {
                return base;
            }

            public Integer getRate() {
                return rate;
            }

            public Integer getStartTime() {
                return startTime;
            }

            @Override
            public void validate() throws Exception {

            }
        }

        @ApiModel(parent = IVarStepConstraint.class)
        public static class FmuMaxStepSizeConstraint implements IVarStepConstraint {

            @Override
            public void validate() throws Exception {

            }
        }

        @ApiModel(parent = IVarStepConstraint.class)
        public static class BoundedDifferenceConstraint implements IVarStepConstraint {
            final List&lt;String&gt; ports;
            final Double reltol;
            final Double abstol;
            final Double safety;
            final Boolean skipDiscrete;

            public BoundedDifferenceConstraint(List&lt;String&gt; ports, Double reltol, Double abstol, Double safety, Boolean skipDiscrete) {
                this.ports = ports;
                this.reltol = reltol;
                this.abstol = abstol;
                this.safety = safety;
                this.skipDiscrete = skipDiscrete;
            }

            public List&lt;String&gt; getPorts() {
                return ports;
            }

            public Double getReltol() {
                return reltol;
            }

            public Double getAbstol() {
                return abstol;
            }

            public Double getSafety() {
                return safety;
            }

            public Boolean getSkipDiscrete() {
                return skipDiscrete;
            }

            @Override
            public void validate() throws Exception {

            }
        }

        @ApiModel(parent = IVarStepConstraint.class)
        public static class ZeroCrossingConstraint implements IVarStepConstraint {
            final List&lt;String&gt; ports;
            final Integer order;
            final Double abstol;
            final Double safety;

            public ZeroCrossingConstraint(List&lt;String&gt; ports, Integer order, Double abstol, Double safety) {
                this.ports = ports;
                this.order = order;
                this.abstol = abstol;
                this.safety = safety;
            }

            public List&lt;String&gt; getPorts() {
                return ports;
            }

            public Integer getOrder() {
                return order;
            }

            public Double getAbstol() {
                return abstol;
            }

            public Double getSafety() {
                return safety;
            }

            @Override
            public void validate() throws Exception {

            }
        }

        //    @RequestMapping(value = &quot;&quot;, method = RequestMethod.POST)
        //    public void createField(@RequestBody FieldRequest fieldRequest, Principal principal) throws Exception {
        //        int tenantId = tenantDataService.getTenantId(principal.getName());
        //        logger.debug(&quot;Creating field, user {}, tenant id {}&quot;, principal.getName(), tenantId);
        //        com.agcocorp.logistics.resources.model.FieldConfiguration mapped = buildField(fieldRequest);
        //        com.agcocorp.logistics.resources.model.Field created = service.create(tenantId, mapped);
        //        return modelMapperService.getModelMapper().map(created);
        //    }
    }
}</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>org/intocps/maestro/webapi/maestro1/Maestro1SimulationController.java</td>
<td>422</td></tr>
<tr class="a">
<td>org/intocps/maestro/webapi/maestro2/Maestro2SimulationController.java</td>
<td>374</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>        public StatusModel(String status, String sessionId, long lastExecTime) {
            this.status = status;
            this.sessionId = sessionId;
            this.lastExecTime = lastExecTime;
        }
    }

    public static class InitializeStatusModel extends StatusModel {

        @JsonProperty(&quot;avaliableLogLevels&quot;)
        private final Map&lt;String, List&lt;LogLevelModel&gt;&gt; avaliableLogLevels;

        @JsonCreator
        public InitializeStatusModel(@JsonProperty(&quot;status&quot;) String status, @JsonProperty(&quot;sessionid&quot;) String sessionId,
                @JsonProperty(&quot;avaliableLogLevels&quot;) Map&lt;String, List&lt;LogLevelModel&gt;&gt; avaliableLogLevels,
                @JsonProperty(&quot;lastExecTime&quot;) final long lastExecTime) {
            super(status, sessionId, lastExecTime);
            this.avaliableLogLevels = avaliableLogLevels;
        }

        public static class LogLevelModel {
            final String name;
            final String description;

            public LogLevelModel(String name, String description) {
                this.name = name;
                this.description = description;
            }
        }
    }

    @ApiModel(parent = IAlgorithmConfig.class)
    public static class FixedStepAlgorithmConfig implements IAlgorithmConfig {
        @JsonProperty(&quot;size&quot;)
        public final Double size;

        @JsonCreator
        public FixedStepAlgorithmConfig(@JsonProperty(&quot;size&quot;) Double size) {
            this.size = size;
        }

        public Double getSize() {
            return size;
        }
    }

    @ApiModel(parent = IAlgorithmConfig.class)
    public static class VariableStepAlgorithmConfig implements IAlgorithmConfig {

        @JsonProperty(&quot;size&quot;)
        final Double[] size;
        @JsonProperty(&quot;initsize&quot;)
        final Double initsize;
        @JsonProperty(&quot;constraints&quot;)
        final List&lt;IVarStepConstraint&gt; constraints;

        public VariableStepAlgorithmConfig(@JsonProperty(&quot;size&quot;) Double[] size, @JsonProperty(&quot;initsize&quot;) Double initsize,
                @JsonProperty(&quot;constraints&quot;) final List&lt;IVarStepConstraint&gt; constraints) {
            this.size = size;
            this.initsize = initsize;
            this.constraints = constraints;
        }

        public Double[] getSize() {
            return size;
        }

        public Double getInitsize() {
            return initsize;
        }

        public List&lt;IVarStepConstraint&gt; getConstraints() {
            return constraints;
        }

    }

    public static class IninializationData {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>org/intocps/maestro/webapi/maestro1/Maestro1SimulationController.java</td>
<td>382</td></tr>
<tr class="a">
<td>org/intocps/maestro/webapi/maestro2/Maestro2SimulationController.java</td>
<td>318</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>            @Type(value = IninializationData.FmuMaxStepSizeConstraint.class, name = &quot;fmumaxstepsize&quot;)})
    @JsonInclude(JsonInclude.Include.NON_EMPTY)
    public interface IVarStepConstraint {

        void validate() throws Exception;
    }

    public static class SimulateRequestBody {
        @JsonProperty(&quot;startTime&quot;)
        final double startTime;
        @JsonProperty(&quot;endTime&quot;)
        final double endTime;
        @JsonProperty(&quot;logLevels&quot;)
        final Map&lt;String, List&lt;String&gt;&gt; logLevels;
        @JsonProperty(&quot;reportProgress&quot;)
        final Boolean reportProgress;
        @JsonProperty(&quot;liveLogInterval&quot;)
        final Integer liveLogInterval;

        @JsonCreator
        public SimulateRequestBody(@JsonProperty(&quot;startTime&quot;) double startTime, @JsonProperty(&quot;endTime&quot;) double endTime,
                @JsonProperty(&quot;logLevels&quot;) Map&lt;String, List&lt;String&gt;&gt; logLevels, @JsonProperty(&quot;reportProgress&quot;) Boolean reportProgress,
                @JsonProperty(&quot;liveLogInterval&quot;) Integer liveLogInterval) {
            this.startTime = startTime;
            this.endTime = endTime;
            this.logLevels = logLevels;
            this.reportProgress = reportProgress;
            this.liveLogInterval = liveLogInterval;
        }</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>org/intocps/maestro/webapi/maestro1/Maestro1SimulationController.java</td>
<td>499</td></tr>
<tr class="a">
<td>org/intocps/maestro/webapi/maestro2/Maestro2SimulationController.java</td>
<td>451</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>    public static class IninializationData {
        @JsonProperty(&quot;fmus&quot;)
        final Map&lt;String, String&gt; fmus;
        @JsonProperty(&quot;connections&quot;)
        final Map&lt;String, List&lt;String&gt;&gt; connections;
        @JsonProperty(&quot;parameters&quot;)
        final Map&lt;String, Object&gt; parameters;
        @JsonProperty(&quot;livestream&quot;)
        final Map&lt;String, List&lt;String&gt;&gt; livestream;
        @JsonProperty(&quot;logvariables&quot;)
        final Map&lt;String, List&lt;String&gt;&gt; logVariables;
        @JsonProperty(&quot;parallelSimulation&quot;)
        final boolean parallelSimulation;
        @JsonProperty(&quot;stabalizationEnabled&quot;)
        final boolean stabalizationEnabled;
        @JsonProperty(&quot;global_absolute_tolerance&quot;)
        final double global_absolute_tolerance;
        @JsonProperty(&quot;global_relative_tolerance&quot;)
        final double global_relative_tolerance;
        @JsonProperty(&quot;loggingOn&quot;)
        final boolean loggingOn;
        @JsonProperty(&quot;visible&quot;)
        final boolean visible;
        @JsonProperty(&quot;simulationProgramDelay&quot;)
        final boolean simulationProgramDelay;
        @JsonProperty(&quot;hasExternalSignals&quot;)
        final boolean hasExternalSignals;
        @JsonProperty(&quot;overrideLogLevel&quot;)
        final InitializeLogLevel overrideLogLevel;
        @JsonProperty(&quot;algorithm&quot;)
        IAlgorithmConfig algorithm;

        @JsonCreator
        public IninializationData(@JsonProperty(&quot;fmus&quot;) Map&lt;String, String&gt; fmus, @JsonProperty(&quot;connections&quot;) Map&lt;String, List&lt;String&gt;&gt; connections,</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>org/intocps/maestro/webapi/maestro1/Maestro1SimulationController.java</td>
<td>135</td></tr>
<tr class="a">
<td>org/intocps/maestro/webapi/maestro2/Maestro2SimulationController.java</td>
<td>140</td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>            throw new Exception(&quot;bad session&quot;);
        }

        if (body == null) {
            throw new Exception(&quot;Could not parse configuration: &quot;);
        }

        //        if (body.overrideLogLevel != null)
        //        {
        //            LogManager.getRootLogger().setLevel(Level.toLevel(body.overrideLogLevel));
        //        }

        if (body.fmus == null) {
            throw new Exception(&quot;FMUs must not be null&quot;);
        }

        if (body.connections == null) {
            throw new Exception(&quot;Connections must not be null&quot;);
        }

        CoSimStepSizeCalculator stepSizeCalculator = null;
        Algorithm stepAlgorithm = Algorithm.NONE;
        if (body.algorithm == null) {

            stepAlgorithm = Algorithm.FIXED;
            stepSizeCalculator = new BasicFixedStepSizeCalculator(0.1);
            logger.info(&quot;No step size algorithm given. Defaulting to fixed-step with size 0.1&quot;);

        } else if (body.algorithm instanceof FixedStepAlgorithmConfig) {
            FixedStepAlgorithmConfig algorithm = (FixedStepAlgorithmConfig) body.algorithm;

            if (algorithm.size == null) {
                throw new Exception(&quot;fixed-step size must be an integer or double&quot;);
            }

            logger.info(&quot;Using Fixed-step size calculator with size = {}&quot;, algorithm.size);
            stepSizeCalculator = new BasicFixedStepSizeCalculator(algorithm.size);
            stepAlgorithm = Algorithm.FIXED;
        } else if (body.algorithm instanceof VariableStepAlgorithmConfig) {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>org/intocps/maestro/webapi/controllers/EsaSimulationController.java</td>
<td>326</td></tr>
<tr class="a">
<td>org/intocps/maestro/webapi/maestro1/Maestro1SimulationController.java</td>
<td>616</td></tr>
<tr class="b">
<td>org/intocps/maestro/webapi/maestro2/Maestro2SimulationController.java</td>
<td>568</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>        }

        @JsonIgnore
        public Map&lt;String, URI&gt; getFmuFiles() throws Exception {
            Map&lt;String, URI&gt; files = new HashMap&lt;&gt;();

            if (fmus != null) {
                for (Map.Entry&lt;String, String&gt; entry : fmus.entrySet()) {
                    try {
                        files.put(entry.getKey(), new URI(entry.getValue()));
                    } catch (Exception e) {
                        throw new Exception(entry.getKey() + &quot;-&quot; + entry.getValue() + &quot;: &quot; + e.getMessage(), e);
                    }
                }
            }
            return files;
        }</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>org/intocps/maestro/webapi/maestro1/Maestro1SimulationController.java</td>
<td>243</td></tr>
<tr class="b">
<td>org/intocps/maestro/webapi/maestro2/Maestro2SimulationController.java</td>
<td>226</td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>        mapper.writeValue(new File(coe.getResultRoot(), &quot;simulate.json&quot;), body);


        Map&lt;ModelConnection.ModelInstance, List&lt;String&gt;&gt; logLevels = new HashMap&lt;&gt;();

        if (body.logLevels != null) {
            for (Map.Entry&lt;String, List&lt;String&gt;&gt; entry : body.logLevels.entrySet()) {
                try {
                    logLevels.put(ModelConnection.ModelInstance.parse(entry.getKey()), entry.getValue());
                } catch (Exception e) {
                    throw new Exception(&quot;Error in logging &quot; + &quot;levels&quot;);
                }
            }
        }</pre></div></td></tr></table></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
        Copyright &#169;      2020.All rights reserved.      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
